name: CI - Spring Boot          # ì›Œí¬í”Œë¡œìš° ì´ë¦„ (GitHub Actionsì—ì„œ ë³´ì¼ ì´ë¦„)

on:                              # íŠ¸ë¦¬ê±° (ì–¸ì œ ì‹¤í–‰í•  ê²ƒì¸ê°€?)
  push:                          # 'push' ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ì‹¤í–‰
    branches: [ "main" ]         # íŠ¹íˆ main ë¸Œëœì¹˜ì— pushë  ë•Œë§Œ

jobs:                            # ì—¬ëŸ¬ jobì„ ë™ì‹œì— ì‹¤í–‰ ê°€ëŠ¥
  build:                         # job ì´ë¦„ (ì›í•˜ëŠ” ì´ë¦„ìœ¼ë¡œ ë°”ê¿”ë„ ë¨)
    runs-on: ubuntu-latest       # ì–´ë–¤ OS í™˜ê²½ì—ì„œ ì‹¤í–‰í• ì§€ (ìš°ë¶„íˆ¬ ìµœì‹  ë²„ì „)

    steps:                       # job ì•ˆì—ì„œì˜ ì‹¤í–‰ ë‹¨ìœ„(step)
      - name: ğŸ“¦ ì½”ë“œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v3   # GitHub repo ì½”ë“œë¥¼ ë°›ì•„ì˜¤ëŠ” ì•¡ì…˜

      - name: â˜• Java 17 ì„¸íŒ…
        uses: actions/setup-java@v3
        with:
          java-version: '17'        # ì‚¬ìš©í•  Java ë²„ì „
          distribution: 'temurin'   # OpenJDK ë°°í¬íŒ ì„ íƒ (temurinì´ ê°€ì¥ ì¼ë°˜ì )

      - name: âœ… gradlew ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
        run: chmod +x ./gradlew     # gradlewì— ì‹¤í–‰ ê¶Œí•œ ì£¼ê¸° (ìœ ë‹‰ìŠ¤ í™˜ê²½ì—ì„œ í•„ìˆ˜)

      - name: ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        run: ./gradlew test         # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

      - name: ğŸ—ï¸ ë¹Œë“œ ì‹¤í–‰
        run: ./gradlew build        # ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ (jar ìƒì„±)

      - name: ğŸ“¤ JAR íŒŒì¼ ì—…ë¡œë“œ
        uses: actions/upload-artifact@v4
        with:
          name: spring-boot-app
          path: build/libs/*.jar